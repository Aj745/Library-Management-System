@model IEnumerable<Library_Management_System.Models.tbl_dashbord>
@{
    ViewBag.Title = "GetLibrary";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link href="~/styles/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/styles/css/bootstrap.css" rel="stylesheet" />

    <h1 style="text-align:center"><u>Library Management System</u></h1>

    @using (Html.BeginForm("GetLibrary", "Home", FormMethod.Post))
    {
        <div style="text-align:right">



        </div>
        <br />
        <form class="form-group-sm" action="/action_page.php">
            <form1 class="form-group-sm" action="/action_page.php">



                <div style="text-align:center" class="col-lg-12">

                    <table style="background-color:deepskyblue" class="table table-striped table-bordered main-content table-hover" id="example">
                        <form1 class="form-inline" action="/action_page.php">
                            <thead>

                                <tr style="text-align:center">

                                    <th style="text-align:center">
                                        @Html.DisplayName("ID")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Book Name")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Author Name")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Issure Name")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Date Of Issue ")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Date Of Return")
                                    </th>
                                    <th style="text-align:center">
                                        @Html.DisplayName("Fine")
                                    </th>

                                    <th style="text-align:center">Action</th>
                                </tr>

                            </thead>


                            @*</table>
                                <table style="background-color:lightpink" class="table table-striped table-bordered main-content table-hover" id="">*@
                            <tbody>
                                @foreach (var item in Model)
                                {

                                    <tr id="#" style="text-align:center">
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.ID)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.BookName)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.Author)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.IssureName)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.DateOfIssue)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.DateOfReturn)
                                        </td>
                                        <td style="text-align:center">
                                            @Html.DisplayFor(modelItem => item.Fine)
                                        </td>
                                        <td style="text-align:center">
                                            <button type="button" class="btn btn-danger"  data-id="@item.ID" data-toggle="modal" data-target="#exampleModal" id="btnvalue">Delete </button>

                                            <a href="@Url.Action("Edit", "Home")/@item.ID" class="btn btn-danger">Edit</a>


                                        </td>
                                    </tr>
                                }
                            </tbody>
                    </table>

                </div>
                <input type="hidden" id="hiddenbookid" name="hiddenbookid"/>
            </form1>
        </form>
    }

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><b><u>DELETE CONFERMATION</u></b></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" >
                        
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h6>Are You Sure to Delete this Record ?</h6>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">NO</button>
                    <button type="button" class="btn btn-primary" onclick="deletefun();">Yes, Delete</button>
                </div> 
            </div>
        </div>
    </div>
<script src="~/styles/js/bootstrap.min.js"></script>
<script src="~/styles/js/bootstrap.js"></script>
<script>
    $("#btnvalue").click(function () {
      
    var dataId = $(this).attr("data-id");
    $("#hiddenbookid").val(dataId);
    });


    function deletefun() {
        var del_id = $("#hiddenbookid").val();
        $.ajax({
            url: "/Home/DeleteBook/",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{'del_id':'" + del_id + "'}",
            success: function (data) {
                window.location.reload();
            },
            error: function () {
            }
        });
    }

</script>



